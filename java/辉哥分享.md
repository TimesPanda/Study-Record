架构演练
1.0单一架构
      单应用  单机 单数据库
      所有业务部署在一起   一个应用  一台机器 一个数据库
     
    缺点：应用与模块之间耦合度极高，服务器资源利用率极低，稍有问题即可造成业务全面阻断。
               数据库可维护性极差，一个库表极其多，太过集中，应用代码可读性、可维护性极低、复用性极差，服务器成本极高，性能极低。
2.0垂直架构
     多应用  多机  多数据库(主备)
      一个应用，  一台机器 ，多个应用多台机器部署，  对应一个数据库
   缺点：应用与模块之间耦合度中高，服务器资源利用率低，稍有问题即可造成部分业务阻断。
               数据库可维护性太差，表太多，太过集中，应用代码可维护性、复用性差。服务器成本高，性能低。

3.0垂直+水平架构
     多机（多应用）多数据库（集群）
     每台机器部署多个web 服务器，每个web服务器部署一个或多个应用，前置2台nginx 做负载转发
至每台web服务器，网络层采用F5做转发到前置NGINX
   缺点：服务治理难，应用无法集中管理及监控，各个模块之间采用url方式调用，性能低，

4.0微服务
     多机（多应用）多数据库（集群）,所有业务均被拆分为服务，以服务的方式部署，万物皆为服务。
  缺点：无法自动扩容及伸缩，面对业务日益增长，需要手动扩容，添加机器添加节点，运维成本高

5.云架构
    多机（多应用）多数据库（集群）,所有业务均被拆分为服务，以服务的方式部署。
    自动扩容、弹性收缩、削峰若谷、低峰自动回首资源、高峰自动扩容资源


数据库优化
      1.采用集群部署一主多从实例，安装时优化内存，编码及初始化规范
      2.在程序与数据库之间采用连接池，避免频繁初始化，销毁连接，提高连接活跃度，先产生一部分连接然后重复利用，使用完毕释放回池子。
      3.数据库表设计尽量准守三大范式（a.字段不可在拆分 b.每个表必须有一个主键字段 c.字段尽量不要冗余） 个别常用关联显示字段可做冗余
      4.做好表索引设计 查询 主键  唯一索引，避免在索引字段左边进行函授转换、   前模糊、非空判断、隐形类型转换、索引字段为空造成索引失效
      5.数据库读写分离，避免频换写造成索引失效
      6.采用垂直（纵向拆分）或水平（横向拆分）分库分表，垂直可根据业务（订单库，用户库）分库，水平可根据地区或用户分库（ 用户1库.用户1表, 用户1库.用户2表, 用户2库.用户1表, 用户2库.用户2表），根据订单号规则分表
      7.在数据服务层增加一层cache 减小数据库压力
         a.终态不变更数据可缓存提高查询效率减小数据库压力
         b.常见基础数据可缓存
         c.数据可靠性要求不高，频换更新的数据类可先操作缓存然后在异步同步至数据库
         d.热点数据缓存
     8.避免大sql
        a.多表关联查询是用性能分析工具，分析是否走索引是否已经是最优状态
        b.多表关联查询可以在业务层面采用多次查询的方式将数据局合并在一起
        c.避免采用sql进行相关计算
     9.对于大表引入大数据分析软件
     10.限制热点数据表查询区间
